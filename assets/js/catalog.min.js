function initCatalog(el){if(!el)throw"el is not a HTMLElement";let hArr=[];let els;if(!el.querySelectorAll){els=el.querySelectorAll("h1, h2, h3, h4, h5, h6")}else{els=el.children}for(let i=0;i<els.length;i++){if(els[i].nodeType===1&&/H\d/i.test(els[i].nodeName)){let name=els[i].getAttribute("name");hArr.push({tag:els[i].nodeName.toLowerCase(),text:els[i].innerText,name:name,el:els[i]})}}if(hArr.length<=0){return[]}let titles=[];let level1tag=hArr[0].tag;let level2tag="";let $2th=[];for(let i=0;i<hArr.length;i++){let obj={$1th:"",$2th:[]};if(hArr[i].tag===level2tag){$2th.push(hArr[i]);hArr[i].el.classList.add("catalog-title");hArr[i].el.classList.add("ct-level2");continue}else if(hArr[i].tag===level1tag){for(let j=i+1;j<hArr.length;j++){if(hArr[j].tag>level1tag){level2tag=hArr[j].tag;break}}obj.$1th=hArr[i];hArr[i].el.classList.add("catalog-title");hArr[i].el.classList.add("ct-level1");$2th=[]}else{continue}obj.$2th=$2th;titles.push(obj)}return titles}document.addEventListener("DOMContentLoaded",function(){let el=document.getElementsByClassName("post-content")&&document.getElementsByClassName("post-content")[0];let catalog=document.getElementById("catalog");if(!el){catalog.style.display="none";return}let navTitles=document.getElementsByClassName("nav-title");let titles=initCatalog(el);if(titles.length===0){catalog.style.display="none";return}catalog.style.display="block";let catalogItems=[];for(let i=0,l=titles.length;i<l;i++){let p=document.createElement("p");p.classList.add("catalog-item");p.innerHTML="<span>"+(i+1)+"."+"</span>"+" "+"<div>"+titles[i].$1th.el.innerText+"</div>";p.onclick=function(){titles[i].$1th.el.scrollIntoView({behavior:"smooth"})};catalog.appendChild(p);catalogItems.push({el:p,title:titles[i].$1th.el})}for(let i=0;i<navTitles.length;i++){navTitles[i].onclick=function(){let j=(i+1)%navTitles.length;navTitles[j].scrollIntoView(true)}}document.addEventListener("scroll",function(){let scrollTop=document.documentElement.scrollTop||document.body.scrollTop;let clientHeight=document.documentElement.clientHeight||document.body.clientHeight;let scrollHeight=document.documentElement.scrollHeight||document.body.scrollHeight;for(let i=0,l=catalogItems.length;i<l;i++){if(scrollTop>=catalogItems[i].title.offsetTop-10||scrollTop+clientHeight===scrollHeight){catalogItems[i].el.classList.add("catalog-item-active")}else{catalogItems[i].el.classList.remove("catalog-item-active")}}})});